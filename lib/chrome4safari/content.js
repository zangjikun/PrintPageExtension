function uid(){var b=[],d="0123456789ABCDEF";var c=12;var a=0;for(a=0;a<c;a++){b[a]=Math.floor(Math.random()*16)}b[14]=4;for(a=0;a<c;a++){b[a]=d[b[a]]}return b.join("")}function addCallbackListener(b){var a=uid();safari.self.addEventListener("message",function(c){if(c.name==="callback"&&c.message.callbackId===a){if(typeof b==="function"){b(c.message.data)}}},false);return a}if(safari.application&&window.parent!==window){function sendMessage(){window.parent.postMessage(JSON.stringify({name:"popupcontentloaded",message:{width:document.body.offsetWidth,height:document.body.offsetHeight}}),"*")}document.addEventListener("DOMContentLoaded",sendMessage,true)}var chrome=window.chrome=window.chrome||{};window.chrome=chrome;(function(a){var b=JSON.parse(localStorage.getItem("messages"));if(window!==window.top){return}a.c4s={sendSyncMessage:function(c){var d={bubbles:false,cancelBubble:false,cancelable:true,clipboardData:undefined,currentTarget:null,defaultPrevented:false,eventPhase:0,returnValue:true,target:document,url:"test",mustBePurged:true,preventDefault:function(){},type:"beforeload",__proto__:BeforeLoadEvent};event=d;return safari.self.tab.canLoad(d,c)},getXHR:function(e,h,g){try{var f=new XMLHttpRequest();if(h!=undefined){var c=true}else{var c=false}c=false;f.open("get",e,c);if(c){f.onreadystatechange=function(i){if(this.readyState===4){h&&h(f)}};f.send(null);return f}else{f.send(null);return f}}catch(d){console.error(d,e)}},getXML:function(c,e){var d=a.c4s.getXHR(c,e&&function(f){e(f.responseXML)});if(d!==undefined){return d}},getJs:function(d,f){var c;if(f!==undefined){c=function(g){f(g.responseText)}}var e=a.c4s.getXHR(d,c,"text/javascript");if(e!==undefined){return e}},getFile:function(d,f){var c;if(f!==undefined){c=function(g){f(g.responseText)}}var e=a.c4s.getXHR(d,c);if(e!==undefined){return e}}};a.Event=function(c,d){this.eventName=c;if(typeof d=="function"){this.cb=d;this.eventArg=undefined}else{this.cb=undefined;this.eventArg=d}this.listeners=[]};a.Event.prototype={addListener:function(c){this.listeners.push(c)},attach_:function(){},destroy_:function(){},detach_:function(){},dispatch:function(c){for(listener in this.listeners){fListener=this.listeners[listener];this.cb&&this.cb(fListener);fListener.apply(fListener,c)}},findListener_:function(c){},hasListener:function(c){return c in this.listeners},hasListeners:function(c){},removeListener:function(d){var c=this.listeners.indexOf(d);if(c!=-1){this.listeners.splice(c,1)}}};a.Port=function(c,d){this.portId=c;this.name=d};a.Port.prototype={destroy_:function(){},disconnect:function(){},postMessage:function(){},onMessage:new a.Event("chrome.Port.onMessage",function(c){safari.self.addEventListener("message",function(d){if(d.name!=="port-postMessage"){return}if(d.message.portUuid!==portUuid){return}c(d.message.data)})}),onDisconnect:new a.Event("chrome.Port.onDisconnect")};a.app={getDetails:function(){},getDetailsForFrame:function(){},install:function(){},isInstalled:"-"};a.i18n={getMessage:function(c,d){return(c in b)&&(("placeholders" in b[c])?b[c].message.replace(/$([^$]+)$/,b[c].placeholders[RegExp.$1].content.replace(/$([\d])/,d[RegExp.$1])):b[c].message)||""},getAcceptLanguages:function(e){var d=navigator.language;var c=[d].concat(/-/.test(d)?d.split("-")[0]:[]);if(typeof e==="function"){e(c)}return c}};a.extension={inIcognitoContext:false,inIncognitoTab:false,isAllowedFilesSchemeAccess:"-",isAllowedIncognitoAccess:"-",getURL:function(c){return safari.extension.baseURI+((typeof c==="string")?(c.indexOf("/")===0?c.substr(1):c):"")},sendRequest:function(d,c){safari.self.tab.dispatchMessage("request",{data:d,callbackId:addCallbackListener(c),sender:{tabId:safari.self.tab.id}})},getViews:"-",onRequest:new a.Event("chrome.extension.onRequest"),connect:function(e,d){var c="portUuid"+Math.random();safari.self.tab.dispatchMessage("port-create",{name:e.name,uuid:c});return new a.Port(c,e.name)},onConnect:new a.Event("chrome.extension.onConnect"),onConnectExternal:"-",onRequestExternal:"-",getGetter:function(d,c,e){return function(){e.push(d);args=[];for(var j=0;j<arguments.length;j++){args.push(arguments[j])}var h=a.c4s.sendSyncMessage({name:"getBackgroundPageElement",element:e,args:args});var g=JSON.parse(h);if(c==="function"){return g}else{var f=a.extension.getSyncResult(g,e);return f}}},getSetter:function(d,c,e){return function(){}},getSyncResult:function(c,d){if(d===undefined){d=[]}var e=function(){};for(elt in c){e.__defineGetter__(elt,a.extension.getGetter(elt,c[elt],d));e.__defineSetter__(elt,a.extension.getSetter(elt,c[elt],d))}return e},getBackgroundPage:function(){var c=JSON.parse(a.c4s.sendSyncMessage({name:"getBackgroundPage"}));return a.extension.getSyncResult(c)},getExtensionTabs:"-",getToolstrip:"-",setUpdateUrlData:"-"};a.bookmarks="-";a.browserAction="-";a.chromeOsInfoPrivate="-";a.contextMenus="-";a.cookies="-";a.csi=function(){};a.devtools="-";a.experimental={accessibility:"-",bookmarkManager:"-",clipboard:"-",contentSettings:{misc:"-"},debugger_:"-",extension:"-",infobars:"-",input:"-",metrics:"-",popup:"-",processes:"-",proxy:"-",rlz:"-",sidebar:"-",tts:"-",webNavigation:"-",webRequest:"-"};a.fileBrowserHandler="-";a.fileBrowserPrivate="-";a.fileSystem="-";a.history="-";a.idle="-";a.loadTimes=function(){};a.management="-";a.omnibox="-";a.pageAction="-";a.pageActions="-";a.searchBox={height:"-",oncancel:null,onchange:null,onresize:null,onsubmit:null,selectionEnd:"-",selectionStart:"-",setSuggestion:function(c){},value:"-",verbatim:"-",width:"-",x:"-",y:"-"};a.self={connect:function(d,c){},getBackgroundPage:"-",getExtensionTabs:"-",getToolStrips:"-",getURL:function(c){},getViews:"-"};a.setSuggetResult=function(c){};a.tabs="-";a.test="-";a.toolstrips="-";a.webstorePrivate="-";a.windows="-";safari.self.addEventListener("message",function(d){if(d.name==="request"){var c=function(f){var e={callbackId:d.message.callbackId,data:f};d.target.tab.dispatchMessage("callback",e)};a.extension.onRequest.dispatch([d.message.data,d.message.sender||{},c])}},false)})(chrome);if(!safari.application&&window.top===window){var sNamespace="chrome4safari";var eContainer;var aNotification=[];const Content=(function(){var b="c4s-container";var a;return{get a(){var c=document.getElementById(b);if(!c){c=document.createElement("div");c.setAttribute("id",b);document.documentElement.appendChild(c)}return c}}})();const NotificationManager=(function(){const a="notifications";const b={};return{max:4,get container(){const d=this;var c=Content.container.querySelector(a);if(!c){c=document.createElement(a);Content.container.appendChild(c);c.addEventListener("DOMSubtreeModified",function(e){d.update()},false)}return c},get elements(){return Array.prototype.slice.call(this.container.querySelectorAll("notification"),0)},update:function(){var c=this.max;this.elements.forEach(function(e,d){e.style.display=(d>=c)?"none":""})},show:function(c){return b[c.id]||(b[c.id]=new Notification(c))},cancel:function(c){b[c.id].destroy();delete (b[c.id])}}})();function Notification(f){var g=this;this.id=f.id;this.element=document.createElement("notification");var e=document.createElement("handlebar");e.innerHTML=f.name||"";var a=document.createElement("close");a.addEventListener("click",function(){g.destroy()},false);e.appendChild(a);this.element.appendChild(e);var c=document.createElement("iframe");this.element.appendChild(c);if(f.url){c.setAttribute("src",f.url)}else{var b="<style>body{font-size:13px;white-space:nowrap;max-width:300px;} body>*{display:inline-block;vertical-align:top;white-space:normal;font-family:Arial,Helvetica,sans-serif;} img{max-width:36px;max-height:36px;} #title{font-weight:bold;}</style>";var d=(f.icon?'<img src="'+f.icon+'">':"")+'<div><div id="title">'+(f.title||"")+"</div><div>"+(f.text||"")+"</div></div>";c.setAttribute("src","data:text/html;base64,"+btoa(b+d));c.addEventListener("load",function(h){},false)}window.addEventListener("blur",function(){g.destroy()},false);window.addEventListener("message",function(i){if(i.source==c.contentWindow){var h=JSON.parse(i.data);switch(h.command){case"close":g.destroy();break;case"resize":if(h.data.width){c.style.width=parseInt(h.data.width)+"px"}if(h.data.height){c.style.height=parseInt(h.data.height)+"px"}break}}},false);NotificationManager.container.appendChild(this.element)}Notification.prototype={destroy:function(){this.element.notification=null;if(this.element.parentNode){this.element.parentNode.removeChild(this.element)}if(this.eventListener){window.removeEventListener("message",this.eventListener,false)}}};var Popup=(function(){var a={ePopup:undefined,eFrame:undefined,closeHandler:undefined,open:function(c){if(!this.ePopup){this.ePopup=document.getElementById("c4s_browserAction_popup");this.eFrame=document.getElementById("c4s_browserAction_frame");if(!this.ePopup){this.ePopup=document.createElement("div");this.ePopup.id="c4s_browserAction_popup";this.ePopup.style.width="400px";this.ePopup.style.height="450px";this.ePopup.style.display="none";this.eFrame=document.createElement("iframe");this.eFrame.id="c4s_browserAction_frame";this.eFrame.style.width="400px";this.eFrame.style.height="450px";this.ePopup.appendChild(this.eFrame);this.ePopup["type" in c?"setAttribute":"removeAttribute"]("type",c.type);document.documentElement.appendChild(this.ePopup)}}this.eFrame.setAttribute("src",c.url);if(c.style){for(var b in c.style){this.ePopup.style[b]=c.style+" !important"}}this.show()},show:function(){if(this.ePopup){this.ePopup.style.display=""}return this},hide:function(){if(this.ePopup){this.ePopup.style.display="none"}return this},close:function(){this.hide();if(this.eFrame){this.eFrame.setAttribute("src","about:blank")}this.closeHandler&&this.closeHandler();return this},update:function(b){if("url" in b){this.eFrame.setAttribute("src",b.url)}return this},resize:function(b){if(this.ePopup){if(b.width){this.ePopup.style.width=parseInt(b.width)+"px";this.eFrame.style.width=parseInt(b.width)+"px"}if(b.height){this.ePopup.style.height=parseInt(b.height)+"px";this.eFrame.style.height=parseInt(b.height)+"px"}}return this}};window.addEventListener("click",function(){a.close()},true);window.addEventListener("unload",a.close,true);return a})();window.addEventListener("message",function(a){if(chrome.extension.getURL("").toLowerCase().indexOf(a.origin)!==-1){var b=JSON.parse(event.data);if(b.name=="popupcontentloaded"){Popup.resize(b.message)}else{if(b.command=="resize"){Popup.resize(b.data)}}}},false);function handleMessage(c){var h=c.name;var a=c.message;var i=true;switch(h){case"notification":NotificationManager[a.method].apply(NotificationManager,a.arguments);break;case"popup":Popup[a.method].apply(Popup,a.arguments||[]);break;case"openpopup":Popup.open(a);break;case"closepopup":Popup.close();break;case"updatepopup":Popup.update(a);break;case"executescript":var g=a.context||{},d=[],f=[];for(var j in a.context){d.push(j);f.push(a.context[j])}Function(d,a.code).apply(window,f);break;case"insertcss":console.log(a);if(a.code){var e=document.createElement("style");e.textContent=a.code;document.documentElement.appendChild(e)}else{if(a.file){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttriute("type","text/css");b.setAttribute("src",a.file);document.documentElement.appendChild(b)}}break;default:i=false;break}if(i&&(typeof a=="object")&&"callbackId" in a){safari.self.tab.dispatchMessage("callback",{callbackId:a.callbackId})}}safari.self.addEventListener("message",handleMessage,false);safari.self.tab.dispatchMessage("load");window.addEventListener("unload",function(){safari.self.tab.dispatchMessage("unload")},false);window.addEventListener("beforeunload",function(){safari.self.tab.dispatchMessage("beforeunload")},false);window.addEventListener("focus",function(){safari.self.tab.dispatchMessage("focus")},true);window.addEventListener("blur",function(){safari.self.tab.dispatchMessage("blur")},true)};