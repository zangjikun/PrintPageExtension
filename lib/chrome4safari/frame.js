function uid(){var b=[],d="0123456789ABCDEF";var c=12;var a=0;for(a=0;a<c;a++){b[a]=Math.floor(Math.random()*16)}b[14]=4;for(a=0;a<c;a++){b[a]=d[b[a]]}return b.join("")}function addCallbackListener(b){var a=uid();safari.self.addEventListener("message",function(c){if(c.name==="callback"&&c.message.callbackId===a){if(typeof b==="function"){b(c.message.data)}}},false);return a}if(safari.application&&window.parent!==window){function sendMessage(){window.parent.postMessage(JSON.stringify({name:"popupcontentloaded",message:{width:document.body.offsetWidth,height:document.body.offsetHeight}}),"*")}document.addEventListener("DOMContentLoaded",sendMessage,true)}var chrome=window.chrome=window.chrome||{};window.chrome=chrome;(function(a){var b=JSON.parse(localStorage.getItem("messages"));var c=function(e,d){for(elt in d){this.__defineGetter__(elt,this.getGetter(elt,d[elt],e))}};c.prototype.getGetter=function(e,d,f){return function(){args=[];for(var g=0;g<arguments.length;g++){args.push(arguments[g])}return a.c4s.getBackgroundPageObject(f,e,args)}};a.c4s={sendSyncMessage:function(d){var e={bubbles:false,cancelBubble:false,cancelable:true,clipboardData:undefined,currentTarget:null,defaultPrevented:false,eventPhase:0,returnValue:true,target:document,url:"test",mustBePurged:true,preventDefault:function(){},type:"beforeload",__proto__:BeforeLoadEvent};event=e;return safari.self.tab.canLoad(e,d)},sendMessage:function(e,f,d){safari.self.tab.dispatchMessage(e,{data:f,callbackId:addCallbackListener(d),sender:{tabId:safari.self.tab.id}})},createProxyFunctions:function(d,e){d.forEach(function(f){a[e][f]=function(){var g=Array.prototype.slice.call(arguments,0);var h;if(typeof g[g.length-1]==="function"){h=g.pop()}a.c4s.sendMessage("function",{method:["chrome",e,f].join("."),arguments:g},h)}})},getBackgroundPageObject:function(g,f,d){var g=g||[];g.push(f);var e=JSON.parse(a.c4s.sendSyncMessage({name:"getBackgroundPageElement",elements:g,args:d}));return new c(g,e)},getXHR:function(f,i,h){try{var g=new XMLHttpRequest();if(i!=undefined){var d=true}else{var d=false}d=false;g.open("get",f,d);if(d){g.onreadystatechange=function(j){if(this.readyState===4){i&&i(g)}};g.send(null);return g}else{g.send(null);return g}}catch(e){console.error(e,f)}},getXML:function(d,f){var e=a.c4s.getXHR(d,f&&function(g){f(g.responseXML)});if(e!==undefined){return e}},getJs:function(e,g){var d;if(g!==undefined){d=function(h){g(h.responseText)}}var f=a.c4s.getXHR(e,d,"text/javascript");if(f!==undefined){return f}},getFile:function(e,g){var d;if(g!==undefined){d=function(h){g(h.responseText)}}var f=a.c4s.getXHR(e,d);if(f!==undefined){return f}}};a.Event=function(d,e){this.eventName=d;if(typeof e=="function"){this.cb=e;this.eventArg=undefined}else{this.cb=undefined;this.eventArg=e}this.listeners=[]};a.Event.prototype={addListener:function(d){this.listeners.push(d)},attach_:function(){},destroy_:function(){},detach_:function(){},dispatch:function(d){for(listener in this.listeners){fListener=this.listeners[listener];this.cb&&this.cb(fListener);fListener.apply(fListener,d)}},findListener_:function(d){},hasListener:function(d){return d in this.listeners},hasListeners:function(d){},removeListener:function(e){var d=this.listeners.indexOf(e);if(d!=-1){this.listeners.splice(d,1)}}};a.Port=function(d,e){this.portId=d;this.name=e};a.Port.prototype={destroy_:function(){},disconnect:function(){},postMessage:function(){},onMessage:new a.Event("chrome.Port.onMessage",function(d){safari.self.addEventListener("message",function(e){if(e.name!=="port-postMessage"){return}if(e.message.portUuid!==portUuid){return}d(e.message.data)})}),onDisconnect:new a.Event("chrome.Port.onDisconnect")};a.app={getDetails:function(){},getDetailsForFrame:function(){},install:function(){},isInstalled:"-"};a.i18n={getMessage:function(d,e){return(d in b)&&(("placeholders" in b[d])?b[d].message.replace(/$([^$]+)$/,b[d].placeholders[RegExp.$1].content.replace(/$([\d])/,e[RegExp.$1])):b[d].message)||""},getAcceptLanguages:function(f){var e=navigator.language;var d=[e].concat(/-/.test(e)?e.split("-")[0]:[]);if(typeof f==="function"){f(d)}return d}};a.extension={inIcognitoContext:false,inIncognitoTab:false,isAllowedFilesSchemeAccess:"-",isAllowedIncognitoAccess:"-",getURL:function(d){return safari.extension.baseURI+((typeof d==="string")?(d.indexOf("/")===0?d.substr(1):d):"")},sendRequest:function(e,d){safari.self.tab.dispatchMessage("request",{data:e,callbackId:addCallbackListener(d),sender:{tabId:safari.self.tab.id}})},getViews:"-",onRequest:new a.Event("chrome.extension.onRequest"),connect:function(f,e){var d="portUuid"+Math.random();safari.self.tab.dispatchMessage("port-create",{name:f.name,uuid:d});result=new a.Port(d,f.name);return result},onConnect:new a.Event("chrome.extension.onConnect"),onConnectExternal:"-",onRequestExternal:"-",getGetter:function(e,d,f){return function(){f.push(e);args=[];for(var k=0;k<arguments.length;k++){args.push(arguments[k])}var j=a.c4s.sendSyncMessage({name:"getBackgroundPageElement",element:f,args:args});var h=JSON.parse(j);if(d==="function"){return h}else{var g=a.extension.getSyncResult(h,f);return g}}},getSetter:function(e,d,f){return function(){}},getSyncResult:function(d,e){if(e===undefined){e=[]}var f=function(){};for(elt in d){f.__defineGetter__(elt,a.extension.getGetter(elt,d[elt],e));f.__defineSetter__(elt,a.extension.getSetter(elt,d[elt],e))}return new f()},getBackgroundPage:function(){var d=JSON.parse(a.c4s.sendSyncMessage({name:"getBackgroundPage"}));return new c([],d)},getExtensionTabs:"-",getToolstrip:"-",setUpdateUrlData:"-"};a.bookmarks="-";a.browserAction=a.browserAction||{};a.c4s.createProxyFunctions(["setBadgeBackgroundColor","setBadgeText","setIcon","setPopup","setTitle"],"browserAction");a.chromeOsInfoPrivate="-";a.contextMenus="-";a.cookies="-";a.csi=function(){};a.devtools="-";a.experimental={accessibility:"-",bookmarkManager:"-",clipboard:"-",contentSettings:{misc:"-"},debugger_:"-",extension:"-",infobars:"-",input:"-",metrics:"-",popup:"-",processes:"-",proxy:"-",rlz:"-",sidebar:"-",tts:"-",webNavigation:"-",webRequest:"-"};a.fileBrowserHandler="-";a.fileBrowserPrivate="-";a.fileSystem="-";a.history="-";a.idle="-";a.loadTimes=function(){};a.management="-";a.omnibox="-";a.pageAction="-";a.pageActions="-";a.searchBox={height:"-",oncancel:null,onchange:null,onresize:null,onsubmit:null,selectionEnd:"-",selectionStart:"-",setSuggestion:function(d){},value:"-",verbatim:"-",width:"-",x:"-",y:"-"};a.self={connect:function(e,d){},getBackgroundPage:"-",getExtensionTabs:"-",getToolStrips:"-",getURL:function(d){},getViews:"-"};a.setSuggetResult=function(d){};a.tabs={};a.c4s.createProxyFunctions(["captureVisibleTab","create","detectLanguage","executeScript","get","getAllInWindow","getSelected","insertCSS","move","remove","sendRequest","update"],"tabs");a.test="-";a.toolstrips="-";a.webstorePrivate="-";a.windows={getAll:function(){}};safari.self.addEventListener("message",function(e){if(e.name==="request"){var d=function(g){var f={callbackId:e.message.callbackId,data:g};e.target.tab.dispatchMessage("callback",f)};a.extension.onRequest.dispatch([e.message.data,e.message.sender||{},d])}},false);window.addEventListener("load",function(){var d=function(h){var f;for(f in h){var g=h[f];if(g.attributes){for(var e=0;e<g.attributes.length;e++){if(g.attributes[e].nodeName.toLowerCase()==="src"){if(g.attributes[e].nodeValue.indexOf("http://")!==0){g.attributes[e].nodeValue=a.extension.getURL(g.attributes[e].nodeValue)}}}}}};d(document.getElementsByTagName("img"))});window.addEventListener("click",function(f){var e=f.target;while(e){if(e.tagName=="A"&&e.href){var d=e.href;if(e.target){safari.self.tab.dispatchMessage("open",d);f.preventDefault()}else{window.location.href=d}break}e=e.parentNode}},false)})(chrome);if(window.top!==window){var currentSize={};function sendResizeMessage(){if(document.body&&document.body.scrollWidth&&document.body.scrollHeight){var a={width:document.body.scrollWidth,height:document.body.scrollHeight};if(a.width!=currentSize.width||a.height!=currentSize.height){window.parent.postMessage(JSON.stringify({command:"resize",data:a}),"*")}currentSize=a}}document.addEventListener("DOMContentLoaded",sendResizeMessage,false);document.addEventListener("DOMSubtreeModified",sendResizeMessage,false);window.addEventListener("load",sendResizeMessage,false);window.setInterval(sendResizeMessage,200)}if(window.top!==window){const _close=window.close;close=window.close=function(){window.top.postMessage(JSON.stringify({command:"close"}),"*");_close()};window.addEventListener("unload",close,false)}if(!safari.application&&window.top===window){var sNamespace="chrome4safari";var eContainer;var aNotification=[];var Popup=(function(){var a={ePopup:undefined,eFrame:undefined,closeHandler:undefined,open:function(c){if(!this.ePopup){this.ePopup=document.getElementById("c4s_browserAction_popup");this.eFrame=document.getElementById("c4s_browserAction_frame");if(!this.ePopup){this.ePopup=document.createElement("div");this.ePopup.id="c4s_browserAction_popup";this.ePopup.style.width="400px";this.ePopup.style.height="450px";this.ePopup.style.display="none";this.eFrame=document.createElement("iframe");this.eFrame.id="c4s_browserAction_frame";this.eFrame.style.width="400px";this.eFrame.style.height="450px";this.ePopup.appendChild(this.eFrame);this.ePopup["type" in c?"setAttribute":"removeAttribute"]("type",c.type);document.documentElement.appendChild(this.ePopup)}}this.eFrame.setAttribute("src",c.url);if(c.style){for(var b in c.style){this.ePopup.style[b]=c.style+" !important"}}this.show()},show:function(){if(this.ePopup){this.ePopup.style.display=""}return this},hide:function(){if(this.ePopup){this.ePopup.style.display="none"}return this},close:function(){this.hide();if(this.eFrame){this.eFrame.setAttribute("src","about:blank")}this.closeHandler&&this.closeHandler();return this},update:function(b){if("url" in b){this.eFrame.setAttribute("src",b.url)}return this},resize:function(b){if(this.ePopup&&b.width){this.ePopup.style.width=b.width+"px";this.eFrame.style.width=b.width+"px"}if(this.ePopup&&b.height){this.ePopup.style.height=b.height+"px";this.eFrame.style.height=b.height+"px"}return this}};window.addEventListener("click",function(){a.close()},true);window.addEventListener("unload",a.close,true);return a})();window.addEventListener("message",function(a){if(chrome.extension.getURL("").toLowerCase().indexOf(a.origin)){var b=JSON.parse(event.data);if(b.name=="popupcontentloaded"){Popup.ePopup.offsetWidth=b.message.width;Popup.ePopup.offsetHeight=b.message.height}}},false);function handleMessage(c){var h=c.name;var a=c.message;var i=true;switch(h){case"popup":Popup[a.method].apply(Popup,a.arguments||[]);break;case"openpopup":Popup.open(a);break;case"closepopup":Popup.close();break;case"updatepopup":Popup.update(a);break;case"executescript":var g=a.context||{},d=[],f=[];for(var j in a.context){d.push(j);f.push(a.context[j])}Function(d,a.code).apply(window,f);break;case"insertcss":if(a.code){var e=document.createElement("style");e.textContent=a.code;document.documentElement.appendChild(e)}else{if(a.file){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttriute("type","text/css");b.setAttribute("src",a.file);document.documentElement.appendChild(b)}}break;default:i=false;break}if(i&&(typeof a=="object")&&"callbackId" in a){safari.self.tab.dispatchMessage("callback",{callbackId:a.callbackId})}}safari.self.addEventListener("message",handleMessage,false);safari.self.tab.dispatchMessage("load");window.addEventListener("unload",function(){safari.self.tab.dispatchMessage("unload")},false);window.addEventListener("beforeunload",function(){safari.self.tab.dispatchMessage("beforeunload")},false);window.addEventListener("focus",function(){safari.self.tab.dispatchMessage("focus")},true);window.addEventListener("blur",function(){safari.self.tab.dispatchMessage("blur")},true)};